let page=1;const appointment={firstName:"",lastName:"",date:"",time:"",services:[]};function startApp(){showServices(),createSectionBtn(),showFirstSection(),formAnimations(),createSummary()}async function showServices(){try{const e=await fetch("./services.json"),t=await e.json(),{services:n}=t,s=document.querySelector(".list-services");n.forEach(e=>{const{name:t,price:n}=e,a=document.createElement("DIV"),i=document.createElement("P"),o=document.createElement("P");a.appendChild(i),a.appendChild(o),s.appendChild(a),a.addEventListener("click",e=>{e.currentTarget.classList.contains("selected")?(e.currentTarget.classList.remove("selected"),updateAppointment(e.currentTarget,"services",!1)):(e.currentTarget.classList.add("selected"),updateAppointment(e.currentTarget,"services"))}),a.classList.add("service","unselectable"),i.classList.add("service__name"),o.classList.add("service__price"),i.textContent=t,o.textContent="$"+n})}catch(e){console.log(e)}}function createSectionBtn(){const e=document.querySelectorAll("section");for(let t=0;t<e.length;t++){const n=createBtn();if(0===t)n.classList.add("first-page"),n.firstElementChild.textContent="Next >>";else if(t===e.length-1)n.classList.add("last-page");else{n.classList.add("middle-page");const e=document.createElement("BUTTON");e.textContent="Next >>",e.classList.add("button"),e.addEventListener("click",changeSection),n.appendChild(e)}e[t].appendChild(n)}}function createBtn(){const e=document.createElement("DIV");e.classList.add("button-container");const t=document.createElement("BUTTON");return t.textContent="<< Previous",t.classList.add("button"),t.addEventListener("click",changeSection),e.appendChild(t),e}function showFirstSection(){const e=document.querySelectorAll(".nav__item");e[page-1].classList.add("selected");document.querySelectorAll("section")[page-1].classList.add("selected"),e.forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.classList.contains("selected")||(page=e.currentTarget.dataset.section,showSection())})})}function changeSection(e){e.currentTarget.textContent.toLowerCase().includes("next")?page++:page--,showSection()}function showSection(){const e=document.querySelector(".nav__item.selected"),t=e.dataset.section,n=document.querySelector("#section-"+t);e.classList.remove("selected"),n.classList.remove("selected");const s=document.querySelector("#section-"+page),a=document.querySelector(`[data-section='${page}']`);s.classList.add("selected"),a.classList.add("selected"),3==page&&updateSummary()}function createSummary(){const e=document.querySelector(".appointment-details"),t=document.querySelector(".service-details"),n=document.querySelector(".total-price");e.classList.add("no-display"),t.classList.add("no-display"),n.classList.add("no-display"),createSummaryMessage()}function createSummaryMessage(){const e=document.querySelector("#section-3"),t=document.querySelector("#section-3 .button-container"),n=createIcon(),s=document.createElement("DIV"),a=document.createElement("P");s.classList.add("message-container"),Object.values(appointment).includes("")&&0===appointment.services.length?a.textContent="Ups! You are missing Client Info & Services":0===appointment.services.length?a.textContent="Ups! You are missing Services":Object.values(appointment).includes("")?a.textContent="Ups! You are missing Client Info":(s.classList.add("no-display"),showSummary()),s.appendChild(a),s.appendChild(n),e.insertBefore(s,t)}function createIcon(){const e=document.createElement("DIV"),t=document.createElement("I");return e.classList.add("icon-container"),t.classList.add("far","fa-frown"),e.appendChild(t),e}function updateSummary(){const e=document.querySelector(".appointment-details"),t=document.querySelector(".service-details"),n=document.querySelector(".total-price");e.classList.contains("no-display")||(e.classList.add("no-display"),t.classList.add("no-display"),n.classList.add("no-display"));const s=document.querySelector(".message-container p"),a=document.querySelector(".message-container");a.classList.contains("no-display")&&a.classList.remove("no-display"),Object.values(appointment).includes("")&&0===appointment.services.length?s.textContent="Ups! You are missing Client Info & Services":0===appointment.services.length?s.textContent="Ups! You are missing Services":Object.values(appointment).includes("")?s.textContent="Ups! You are missing Client Info":(a.classList.add("no-display"),showSummary())}function showSummary(){document.querySelector(".appointment-details").classList.remove("no-display");const e=document.querySelectorAll(".detail-content");e[0].textContent=`${appointment.firstName} ${appointment.lastName}`,e[1].textContent=appointment.date,e[2].textContent=appointment.time;const t=document.querySelector(".service-details");t.classList.remove("no-display");document.querySelectorAll(".service-detail").forEach(e=>{e.remove()}),appointment.services.forEach(e=>{const{name:n,price:s}=e,a=document.createElement("DIV");a.classList.add("service-detail");const i=document.createElement("P");i.classList.add("name-service"),i.textContent=n;const o=document.createElement("P");o.classList.add("price-service"),o.textContent="$"+s,a.appendChild(i),a.appendChild(o),t.appendChild(a)});const n=document.querySelector(".total-price");n.classList.remove("no-display");let s=0;appointment.services.forEach(e=>{s+=parseInt(e.price)});const a=document.querySelector(".total-price .total-label");a.textContent="Total:";const i=document.querySelector(".total-price .price");i.textContent="$"+s,n.appendChild(a),n.appendChild(i)}function formAnimations(){makeTimeInput(),makeDateInput(),makeNameInput()}function makeNameInput(){const e=document.querySelector("input[name=firstName]"),t=document.querySelector("input[name=lastName]");e.addEventListener("input",(function(e){select(this),""===e.currentTarget.value.trim()?updateAppointment(this,"firstName",!1):updateAppointment(this,"firstName")})),e.addEventListener("focus",(function(e){select(this)})),e.addEventListener("blur",(function(e){""===e.currentTarget.value.trim()?(this.setAttribute("placeholder","Please insert First Name"),this.value="Please insert First Name",wrong(this),unSelect(this)):(correct(this),unSelect(this))})),t.addEventListener("input",(function(e){select(this),""===e.currentTarget.value.trim()?updateAppointment(this,"lastName",!1):updateAppointment(this,"lastName")})),t.addEventListener("focus",(function(e){select(this)})),t.addEventListener("blur",(function(e){""===e.currentTarget.value.trim()?(this.setAttribute("placeholder","Please insert Last Name"),this.value="Please insert Last Name",wrong(this),unSelect(this)):(correct(this),unSelect(this))}))}function updateAppointment(e,t,n=!0){if(n)if("date"===t)appointment[t]=dateTransform(e.value);else if("services"===t){const n=e.textContent.split("$"),s={name:n[0],price:n[1]};appointment[t]=[...appointment[t],s]}else appointment[t]=e.value;else if("services"===t){const n=e.textContent.split("$")[0];appointment[t]=appointment[t].filter(e=>e.name!==n)}else appointment[t]=""}function select(e){e.style.webkitTextFillColor="#000",e.classList.contains("selected")||e.classList.add("selected"),e.classList.contains("wrong")&&(e.classList.remove("wrong"),e.value="","firstName"===e.name?e.setAttribute("placeholder","First Name"):e.setAttribute("placeholder","Last Name")),e.classList.contains("correct")&&e.classList.remove("correct")}function unSelect(e){e.classList.contains("selected")&&e.classList.remove("selected"),e.classList.contains("correct")?e.style.webkitTextFillColor="#808080":e.classList.contains("wrong")&&(e.style.webkitTextFillColor="#F22439")}function selectInput(e,t,n){e.textContent="time"===n?"Opening hours 10:00 to 20:00":"Weekdays Only",t.classList.contains("chosen")&&t.classList.remove("chosen"),t.classList.contains("selected")||t.classList.add("selected")}function dateTransform(e){let t=e.split("-");const n=t[0],s=t[1]-1,a=t[2];t=new Date(n,s,a);return t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function makeDateInput(){const e=document.querySelector(".field-date-time:nth-of-type(2) label"),t=document.querySelector(".field-date-time:nth-of-type(2) input"),n=new Date,s=n.toLocaleDateString("pt-br").split("/").reverse().join("-"),a=new Date(n.setMonth(n.getMonth()+3)).toLocaleDateString("pt-br").split("/").reverse().join("-");t.setAttribute("min",s),t.setAttribute("max",a),t.isFocus=!1,t.hasChanged=!1,t.mouseIsOver=!1,e.mouseIsOver=!1;e.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"date")})),t.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"date")})),e.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===t.mouseIsOver&&!1===t.isFocus&&unSelectInput(e,t,"date")},10)})),t.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===e.mouseIsOver&&!1===this.isFocus&&unSelectInput(e,t,"date")},10)})),t.addEventListener("focus",(function(n){this.isFocus=!0,selectInput(e,t,"date")})),t.addEventListener("blur",(function(){this.isFocus=!1,this.hasChanged=!0,!1===this.mouseIsOver&&!1===e.mouseIsOver&&unSelectInput(e,t,"date")})),t.addEventListener("input",(function(e){this.hasChanged=!0,validateDate(e)}))}function validateDate(e){const t=document.querySelector(".field-date-time:nth-of-type(2) input"),n=new Date,s=new Date,a=new Date(s.setMonth(s.getMonth()+3)),i=e.currentTarget.value.split("-"),o=i[0],c=i[1]-1,r=i[2],l=new Date(Date.UTC(o,c,r)).getUTCDay();o<n.getFullYear()||c<n.getMonth()||r<n.getDate()&&c===n.getMonth()||c>a.getMonth()||c===a.getMonth()&&r>a.getDate()||[0,6].includes(l)?(wrong(t),updateAppointment(t,"date",!1)):(correct(t),updateAppointment(t,"date"))}function makeTimeInput(){const e=document.querySelector(".field-date-time:nth-of-type(3) label"),t=document.querySelector(".field-date-time:nth-of-type(3) input");t.isFocus=!1,t.hasChanged=!1,t.mouseIsOver=!1,e.mouseIsOver=!1;e.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"time")})),t.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"time")})),e.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===t.mouseIsOver&&!1===t.isFocus&&unSelectInput(e,t,"time")},10)})),t.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===e.mouseIsOver&&!1===this.isFocus&&unSelectInput(e,t,"time")},10)})),t.addEventListener("focus",(function(n){this.isFocus=!0,this.hasChanged=!0,selectInput(e,t,"time");const s=n.currentTarget.value.split(":");validateTime(parseInt(s[0]),parseInt(s[1]))})),t.addEventListener("blur",(function(){this.isFocus=!1,this.hasChanged=!0,!1===this.mouseIsOver&&!1===e.mouseIsOver&&unSelectInput(e,t,"time")})),t.addEventListener("input",(function(e){this.hasChanged=!0;const t=e.currentTarget.value.split(":");validateTime(parseInt(t[0]),parseInt(t[1]))}))}function validateTime(e,t){const n=document.querySelector(".field-date-time:nth-of-type(3) input");e>=10&&e<=19?(correct(n),updateAppointment(n,"time")):20===e?t>0?(wrong(n),updateAppointment(n,"time",!1)):(correct(n),updateAppointment(n,"time")):(wrong(n),updateAppointment(n,"time",!1))}function correct(e){e.classList.contains("wrong")?(e.classList.remove("wrong"),e.classList.add("correct")):e.classList.contains("correct")||e.classList.add("correct")}function wrong(e){e.classList.contains("correct")?(e.classList.remove("correct"),e.classList.add("wrong")):e.classList.contains("wrong")||e.classList.add("wrong")}function unSelectInput(e,t,n){t.hasChanged?(t.classList.contains("correct")?e.textContent="date"===n?dateTransform(t.value):t.value:(t.classList.contains("wrong")||t.classList.add("wrong"),e.textContent="time"===n?"Please select a valid Time":"Please select a valid Date"),t.classList.add("chosen")):e.textContent="time"===n?"Time":"Date",t.classList.remove("selected")}
/*! modernizr 3.6.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-webp-setclasses !*/document.addEventListener("DOMContentLoaded",()=>{startApp()}),function(e,t,n){function s(e,t){return typeof e===t}function a(e){var t=d.className,n=l._config.classPrefix||"";if(m&&(t=t.baseVal),l._config.enableJSClass){var s=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(s,"$1"+n+"js$2")}l._config.enableClasses&&(t+=" "+n+e.join(" "+n),m?d.className.baseVal=t:d.className=t)}function i(e,t){if("object"==typeof e)for(var n in e)u(e,n)&&i(n,e[n]);else{var s=(e=e.toLowerCase()).split("."),o=l[s[0]];if(2==s.length&&(o=o[s[1]]),void 0!==o)return l;t="function"==typeof t?t():t,1==s.length?l[s[0]]=t:(!l[s[0]]||l[s[0]]instanceof Boolean||(l[s[0]]=new Boolean(l[s[0]])),l[s[0]][s[1]]=t),a([(t&&0!=t?"":"no-")+s.join("-")]),l._trigger(e,t)}return l}var o=[],c=[],r={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){c.push({name:e,fn:t,options:n})},addAsyncTest:function(e){c.push({name:null,fn:e})}},l=function(){};l.prototype=r,l=new l;var u,d=t.documentElement,m="svg"===d.nodeName.toLowerCase();!function(){var e={}.hasOwnProperty;u=s(e,"undefined")||s(e.call,"undefined")?function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),r._l={},r.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),l.hasOwnProperty(e)&&setTimeout((function(){l._trigger(e,l[e])}),0)},r._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout((function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)}),0),delete this._l[e]}},l._q.push((function(){r.addTest=i})),l.addAsyncTest((function(){function e(e,t,n){function s(t){var s=!(!t||"load"!==t.type)&&1==a.width;i(e,"webp"===e&&s?new Boolean(s):s),n&&n(t)}var a=new Image;a.onerror=s,a.onload=s,a.src=t}var t=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],n=t.shift();e(n.name,n.uri,(function(n){if(n&&"load"===n.type)for(var s=0;s<t.length;s++)e(t[s].name,t[s].uri)}))})),function(){var e,t,n,a,i,r;for(var u in c)if(c.hasOwnProperty(u)){if(e=[],(t=c[u]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(a=s(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)1===(r=e[i].split(".")).length?l[r[0]]=a:(!l[r[0]]||l[r[0]]instanceof Boolean||(l[r[0]]=new Boolean(l[r[0]])),l[r[0]][r[1]]=a),o.push((a?"":"no-")+r.join("-"))}}(),a(o),delete r.addTest,delete r.addAsyncTest;for(var p=0;p<l._q.length;p++)l._q[p]();e.Modernizr=l}(window,document);
//# sourceMappingURL=bundle.js.map
