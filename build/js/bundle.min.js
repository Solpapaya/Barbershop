let page=3;const appointment={name:"",date:"",time:"",services:[]};function startApp(){showServices(),createSectionBtn(),showFirstSection(),formAnimations(),showSummary()}async function showServices(){try{const e=await fetch("./services.json"),t=await e.json(),{services:s}=t,n=document.querySelector(".list-services");s.forEach(e=>{const{name:t,price:s}=e,c=document.createElement("DIV"),i=document.createElement("P"),o=document.createElement("P");c.appendChild(i),c.appendChild(o),n.appendChild(c),c.addEventListener("click",e=>{e.currentTarget.classList.contains("selected")?e.currentTarget.classList.remove("selected"):e.currentTarget.classList.add("selected")}),c.classList.add("service","unselectable"),i.classList.add("service__name"),o.classList.add("service__price"),i.textContent=t,o.textContent="$"+s})}catch(e){console.log(e)}}function createSectionBtn(){const e=document.querySelectorAll("section");for(let t=0;t<e.length;t++){const s=createBtn();if(0===t)s.classList.add("first-page"),s.firstElementChild.textContent="Next >>";else if(t===e.length-1)s.classList.add("last-page");else{s.classList.add("middle-page");const e=document.createElement("BUTTON");e.textContent="Next >>",e.classList.add("button"),e.addEventListener("click",changeSection),s.appendChild(e)}e[t].appendChild(s)}}function createBtn(){const e=document.createElement("DIV");e.classList.add("button-container");const t=document.createElement("BUTTON");return t.textContent="<< Previous",t.classList.add("button"),t.addEventListener("click",changeSection),e.appendChild(t),e}function showFirstSection(){const e=document.querySelectorAll(".nav__item");e[page-1].classList.add("selected");document.querySelectorAll("section")[page-1].classList.add("selected"),e.forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.classList.contains("selected")||(page=e.currentTarget.dataset.section,showSection())})})}function changeSection(e){e.currentTarget.textContent.toLowerCase().includes("next")?page++:page--,showSection()}function showSection(){const e=document.querySelector(".nav__item.selected"),t=e.dataset.section,s=document.querySelector("#section-"+t);e.classList.remove("selected"),s.classList.remove("selected");const n=document.querySelector("#section-"+page),c=document.querySelector(`[data-section='${page}']`);n.classList.add("selected"),c.classList.add("selected")}function showSummary(){const e=document.querySelector("#section-3"),t=document.querySelector("#section-3 .button-container"),s=createIcon(),n=document.createElement("DIV"),c=document.createElement("P");n.classList.add("message-container"),Object.values(appointment).includes("")?c.textContent="Ups! You are missing Client Info":0===appointment.services.length?c.textContent="Ups! You are missing Services":Object.values(appointment).includes("")&&0===appointment.services.length?c.textContent="Ups! You are missing Clien Info & Services":c.textContent="Appointment Summary",n.appendChild(c),n.appendChild(s),e.insertBefore(n,t)}function createIcon(){const e=document.createElement("DIV"),t=document.createElement("I");return e.classList.add("icon-container"),t.classList.add("far","fa-frown"),e.appendChild(t),e}function formAnimations(){makeTimeInput(),makeDateInput(),makeNameInput()}function makeNameInput(){const e=document.querySelector("input[name=firstName]"),t=document.querySelector("input[name=lastName]");e.addEventListener("input",(function(e){select(this)})),e.addEventListener("focus",(function(e){select(this)})),e.addEventListener("blur",(function(e){""===e.currentTarget.value?(this.setAttribute("placeholder","Please insert First Name"),wrong(this),unSelect(this)):(correct(this),unSelect(this))})),t.addEventListener("input",(function(e){select(this)})),t.addEventListener("focus",(function(e){select(this)})),t.addEventListener("blur",(function(e){""===e.currentTarget.value?(this.setAttribute("placeholder","Please insert Last Name"),wrong(this),unSelect(this)):(correct(this),unSelect(this))}))}function select(e){e.style.webkitTextFillColor="#000",e.classList.contains("selected")||e.classList.add("selected"),e.classList.contains("wrong")&&(e.classList.remove("wrong"),"firstName"===e.name?e.setAttribute("placeholder","First Name"):e.setAttribute("placeholder","Last Name")),e.classList.contains("correct")&&e.classList.remove("correct")}function unSelect(e){e.classList.contains("selected")&&e.classList.remove("selected"),e.classList.contains("correct")?e.style.webkitTextFillColor="#65F200":e.classList.contains("wrong")&&(e.style.webkitTextFillColor="#F22439")}function selectInput(e,t,s){e.textContent="time"===s?"Opening hours 10:00 to 20:00":"Weekdays Only",t.classList.contains("chosen")&&t.classList.remove("chosen"),t.classList.contains("selected")||t.classList.add("selected")}function dateTransform(e){let t=e.split("-");const s=t[0],n=t[1]-1,c=t[2];t=new Date(s,n,c);return t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function makeDateInput(){const e=document.querySelector(".field-date-time:nth-of-type(2) label"),t=document.querySelector(".field-date-time:nth-of-type(2) input"),s=new Date,n=s.toLocaleDateString("pt-br").split("/").reverse().join("-"),c=new Date(s.setMonth(s.getMonth()+3)).toLocaleDateString("pt-br").split("/").reverse().join("-");t.setAttribute("min",n),t.setAttribute("max",c),t.isFocus=!1,t.hasChanged=!1,t.mouseIsOver=!1,e.mouseIsOver=!1;e.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"date")})),t.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"date")})),e.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===t.mouseIsOver&&!1===t.isFocus&&unSelectInput(e,t,"date")},10)})),t.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===e.mouseIsOver&&!1===this.isFocus&&unSelectInput(e,t,"date")},10)})),t.addEventListener("focus",(function(s){this.isFocus=!0,selectInput(e,t,"date")})),t.addEventListener("blur",(function(){this.isFocus=!1,this.hasChanged=!0,!1===this.mouseIsOver&&!1===e.mouseIsOver&&unSelectInput(e,t,"date")})),t.addEventListener("input",(function(e){this.hasChanged=!0,validateDate(e)}))}function validateDate(e){const t=document.querySelector(".field-date-time:nth-of-type(2) input"),s=new Date,n=new Date,c=new Date(n.setMonth(n.getMonth()+3)),i=e.currentTarget.value.split("-"),o=i[0],a=i[1]-1,r=i[2],l=new Date(Date.UTC(o,a,r)).getUTCDay();o<s.getFullYear()||a<s.getMonth()||r<s.getDate()&&a===s.getMonth()||a>c.getMonth()||a===c.getMonth()&&r>c.getDate()||[0,6].includes(l)?wrong(t):correct(t)}function makeTimeInput(){const e=document.querySelector(".field-date-time:nth-of-type(3) label"),t=document.querySelector(".field-date-time:nth-of-type(3) input");t.isFocus=!1,t.hasChanged=!1,t.mouseIsOver=!1,e.mouseIsOver=!1;e.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"time")})),t.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"time")})),e.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===t.mouseIsOver&&!1===t.isFocus&&unSelectInput(e,t,"time")},10)})),t.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===e.mouseIsOver&&!1===this.isFocus&&unSelectInput(e,t,"time")},10)})),t.addEventListener("focus",(function(s){this.isFocus=!0,this.hasChanged=!0,selectInput(e,t,"time");const n=s.currentTarget.value.split(":");validateTime(parseInt(n[0]),parseInt(n[1]))})),t.addEventListener("blur",(function(){this.isFocus=!1,this.hasChanged=!0,!1===this.mouseIsOver&&!1===e.mouseIsOver&&unSelectInput(e,t,"time")})),t.addEventListener("input",(function(e){this.hasChanged=!0;const t=e.currentTarget.value.split(":");validateTime(parseInt(t[0]),parseInt(t[1]))}))}function validateTime(e,t){const s=document.querySelector(".field-date-time:nth-of-type(3) input");e>=10&&e<=19?correct(s):20===e?t>0?wrong(s):correct(s):wrong(s)}function correct(e){e.classList.contains("wrong")?(e.classList.remove("wrong"),e.classList.add("correct")):e.classList.contains("correct")||e.classList.add("correct")}function wrong(e){e.classList.contains("correct")?(e.classList.remove("correct"),e.classList.add("wrong")):e.classList.contains("wrong")||e.classList.add("wrong")}function unSelectInput(e,t,s){t.hasChanged?(t.classList.contains("correct")?e.textContent="date"===s?dateTransform(t.value):t.value:(t.classList.contains("wrong")||t.classList.add("wrong"),e.textContent="time"===s?"Please select a valid Time":"Please select a valid Date"),t.classList.add("chosen")):e.textContent="time"===s?"Time":"Date",t.classList.remove("selected")}document.addEventListener("DOMContentLoaded",()=>{startApp()});
//# sourceMappingURL=bundle.js.map
