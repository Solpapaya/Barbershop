let page=1;const appointment={firstName:"",lastName:"",date:"",time:"",services:[]};function startApp(){showServices(),createSectionBtn(),showFirstSection(),formAnimations(),createSummary()}async function showServices(){try{const e=await fetch("./services.json"),t=await e.json(),{services:n}=t,s=document.querySelector(".list-services");n.forEach(e=>{const{name:t,price:n}=e,i=document.createElement("DIV"),a=document.createElement("P"),c=document.createElement("P");i.appendChild(a),i.appendChild(c),s.appendChild(i),i.addEventListener("click",e=>{e.currentTarget.classList.contains("selected")?(e.currentTarget.classList.remove("selected"),updateAppointment(e.currentTarget,"services",!1)):(e.currentTarget.classList.add("selected"),updateAppointment(e.currentTarget,"services"))}),i.classList.add("service","unselectable"),a.classList.add("service__name"),c.classList.add("service__price"),a.textContent=t,c.textContent="$"+n})}catch(e){console.log(e)}}function createSectionBtn(){const e=document.querySelectorAll("section");for(let t=0;t<e.length;t++){const n=createBtn();if(0===t)n.classList.add("first-page"),n.firstElementChild.textContent="Next >>";else if(t===e.length-1)n.classList.add("last-page");else{n.classList.add("middle-page");const e=document.createElement("BUTTON");e.textContent="Next >>",e.classList.add("button"),e.addEventListener("click",changeSection),n.appendChild(e)}e[t].appendChild(n)}}function createBtn(){const e=document.createElement("DIV");e.classList.add("button-container");const t=document.createElement("BUTTON");return t.textContent="<< Previous",t.classList.add("button"),t.addEventListener("click",changeSection),e.appendChild(t),e}function showFirstSection(){const e=document.querySelectorAll(".nav__item");e[page-1].classList.add("selected");document.querySelectorAll("section")[page-1].classList.add("selected"),e.forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.classList.contains("selected")||(page=e.currentTarget.dataset.section,showSection())})})}function changeSection(e){e.currentTarget.textContent.toLowerCase().includes("next")?page++:page--,showSection()}function showSection(){const e=document.querySelector(".nav__item.selected"),t=e.dataset.section,n=document.querySelector("#section-"+t);e.classList.remove("selected"),n.classList.remove("selected");const s=document.querySelector("#section-"+page),i=document.querySelector(`[data-section='${page}']`);s.classList.add("selected"),i.classList.add("selected"),3==page&&updateSummary()}function createSummary(){const e=document.querySelector(".appointment-details"),t=document.querySelector(".service-details"),n=document.querySelector(".total-price");e.classList.add("no-display"),t.classList.add("no-display"),n.classList.add("no-display"),createSummaryMessage()}function createSummaryMessage(){const e=document.querySelector("#section-3"),t=document.querySelector("#section-3 .button-container"),n=createIcon(),s=document.createElement("DIV"),i=document.createElement("P");s.classList.add("message-container"),Object.values(appointment).includes("")&&0===appointment.services.length?i.textContent="Ups! You are missing Client Info & Services":0===appointment.services.length?i.textContent="Ups! You are missing Services":Object.values(appointment).includes("")?i.textContent="Ups! You are missing Client Info":(s.classList.add("no-display"),showSummary()),s.appendChild(i),s.appendChild(n),e.insertBefore(s,t)}function createIcon(){const e=document.createElement("DIV"),t=document.createElement("I");return e.classList.add("icon-container"),t.classList.add("far","fa-frown"),e.appendChild(t),e}function updateSummary(){const e=document.querySelector(".appointment-details"),t=document.querySelector(".service-details"),n=document.querySelector(".total-price");e.classList.contains("no-display")||(e.classList.add("no-display"),t.classList.add("no-display"),n.classList.add("no-display"));const s=document.querySelector(".message-container p"),i=document.querySelector(".message-container");i.classList.contains("no-display")&&i.classList.remove("no-display"),Object.values(appointment).includes("")&&0===appointment.services.length?s.textContent="Ups! You are missing Client Info & Services":0===appointment.services.length?s.textContent="Ups! You are missing Services":Object.values(appointment).includes("")?s.textContent="Ups! You are missing Client Info":(i.classList.add("no-display"),showSummary())}function showSummary(){document.querySelector(".appointment-details").classList.remove("no-display");const e=document.querySelectorAll(".detail-content");e[0].textContent=`${appointment.firstName} ${appointment.lastName}`,e[1].textContent=appointment.date,e[2].textContent=appointment.time;const t=document.querySelector(".service-details");t.classList.remove("no-display");document.querySelectorAll(".service-detail").forEach(e=>{e.remove()}),appointment.services.forEach(e=>{const{name:n,price:s}=e,i=document.createElement("DIV");i.classList.add("service-detail");const a=document.createElement("P");a.classList.add("name-service"),a.textContent=n;const c=document.createElement("P");c.classList.add("price-service"),c.textContent="$"+s,i.appendChild(a),i.appendChild(c),t.appendChild(i)});const n=document.querySelector(".total-price");n.classList.remove("no-display");let s=0;appointment.services.forEach(e=>{s+=parseInt(e.price)});const i=document.querySelector(".total-price .total-label");i.textContent="Total:";const a=document.querySelector(".total-price .price");a.textContent="$"+s,n.appendChild(i),n.appendChild(a)}function formAnimations(){makeTimeInput(),makeDateInput(),makeNameInput()}function makeNameInput(){const e=document.querySelector("input[name=firstName]"),t=document.querySelector("input[name=lastName]");e.addEventListener("input",(function(e){select(this),""===e.currentTarget.value.trim()?updateAppointment(this,"firstName",!1):updateAppointment(this,"firstName")})),e.addEventListener("focus",(function(e){select(this)})),e.addEventListener("blur",(function(e){""===e.currentTarget.value.trim()?(this.setAttribute("placeholder","Please insert First Name"),this.value="Please insert First Name",wrong(this),unSelect(this)):(correct(this),unSelect(this))})),t.addEventListener("input",(function(e){select(this),""===e.currentTarget.value.trim()?updateAppointment(this,"lastName",!1):updateAppointment(this,"lastName")})),t.addEventListener("focus",(function(e){select(this)})),t.addEventListener("blur",(function(e){""===e.currentTarget.value.trim()?(this.setAttribute("placeholder","Please insert Last Name"),this.value="Please insert Last Name",wrong(this),unSelect(this)):(correct(this),unSelect(this))}))}function updateAppointment(e,t,n=!0){if(n)if("date"===t)appointment[t]=dateTransform(e.value);else if("services"===t){const n=e.textContent.split("$"),s={name:n[0],price:n[1]};appointment[t]=[...appointment[t],s]}else appointment[t]=e.value;else if("services"===t){const n=e.textContent.split("$")[0];appointment[t]=appointment[t].filter(e=>e.name!==n)}else appointment[t]=""}function select(e){e.style.webkitTextFillColor="#000",e.classList.contains("selected")||e.classList.add("selected"),e.classList.contains("wrong")&&(e.classList.remove("wrong"),e.value="","firstName"===e.name?e.setAttribute("placeholder","First Name"):e.setAttribute("placeholder","Last Name")),e.classList.contains("correct")&&e.classList.remove("correct")}function unSelect(e){e.classList.contains("selected")&&e.classList.remove("selected"),e.classList.contains("correct")?e.style.webkitTextFillColor="#808080":e.classList.contains("wrong")&&(e.style.webkitTextFillColor="#F22439")}function selectInput(e,t,n){e.textContent="time"===n?"Opening hours 10:00 to 20:00":"Weekdays Only",t.classList.contains("chosen")&&t.classList.remove("chosen"),t.classList.contains("selected")||t.classList.add("selected")}function dateTransform(e){let t=e.split("-");const n=t[0],s=t[1]-1,i=t[2];t=new Date(n,s,i);return t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function makeDateInput(){const e=document.querySelector(".field-date-time:nth-of-type(2) label"),t=document.querySelector(".field-date-time:nth-of-type(2) input"),n=new Date,s=n.toLocaleDateString("pt-br").split("/").reverse().join("-"),i=new Date(n.setMonth(n.getMonth()+3)).toLocaleDateString("pt-br").split("/").reverse().join("-");t.setAttribute("min",s),t.setAttribute("max",i),t.isFocus=!1,t.hasChanged=!1,t.mouseIsOver=!1,e.mouseIsOver=!1;e.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"date")})),t.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"date")})),e.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===t.mouseIsOver&&!1===t.isFocus&&unSelectInput(e,t,"date")},10)})),t.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===e.mouseIsOver&&!1===this.isFocus&&unSelectInput(e,t,"date")},10)})),t.addEventListener("focus",(function(n){this.isFocus=!0,selectInput(e,t,"date")})),t.addEventListener("blur",(function(){this.isFocus=!1,this.hasChanged=!0,!1===this.mouseIsOver&&!1===e.mouseIsOver&&unSelectInput(e,t,"date")})),t.addEventListener("input",(function(e){this.hasChanged=!0,validateDate(e)}))}function validateDate(e){const t=document.querySelector(".field-date-time:nth-of-type(2) input"),n=new Date,s=new Date,i=new Date(s.setMonth(s.getMonth()+3)),a=e.currentTarget.value.split("-"),c=a[0],o=a[1]-1,r=a[2],l=new Date(Date.UTC(c,o,r)).getUTCDay();c<n.getFullYear()||o<n.getMonth()||r<n.getDate()&&o===n.getMonth()||o>i.getMonth()||o===i.getMonth()&&r>i.getDate()||[0,6].includes(l)?(wrong(t),updateAppointment(t,"date",!1)):(correct(t),updateAppointment(t,"date"))}function makeTimeInput(){const e=document.querySelector(".field-date-time:nth-of-type(3) label"),t=document.querySelector(".field-date-time:nth-of-type(3) input");t.isFocus=!1,t.hasChanged=!1,t.mouseIsOver=!1,e.mouseIsOver=!1;e.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"time")})),t.addEventListener("mouseover",(function(){this.mouseIsOver=!0,selectInput(e,t,"time")})),e.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===t.mouseIsOver&&!1===t.isFocus&&unSelectInput(e,t,"time")},10)})),t.addEventListener("mouseout",(function(){this.mouseIsOver=!1,setTimeout(()=>{!1===e.mouseIsOver&&!1===this.isFocus&&unSelectInput(e,t,"time")},10)})),t.addEventListener("focus",(function(n){this.isFocus=!0,this.hasChanged=!0,selectInput(e,t,"time");const s=n.currentTarget.value.split(":");validateTime(parseInt(s[0]),parseInt(s[1]))})),t.addEventListener("blur",(function(){this.isFocus=!1,this.hasChanged=!0,!1===this.mouseIsOver&&!1===e.mouseIsOver&&unSelectInput(e,t,"time")})),t.addEventListener("input",(function(e){this.hasChanged=!0;const t=e.currentTarget.value.split(":");validateTime(parseInt(t[0]),parseInt(t[1]))}))}function validateTime(e,t){const n=document.querySelector(".field-date-time:nth-of-type(3) input");e>=10&&e<=19?(correct(n),updateAppointment(n,"time")):20===e?t>0?(wrong(n),updateAppointment(n,"time",!1)):(correct(n),updateAppointment(n,"time")):(wrong(n),updateAppointment(n,"time",!1))}function correct(e){e.classList.contains("wrong")?(e.classList.remove("wrong"),e.classList.add("correct")):e.classList.contains("correct")||e.classList.add("correct")}function wrong(e){e.classList.contains("correct")?(e.classList.remove("correct"),e.classList.add("wrong")):e.classList.contains("wrong")||e.classList.add("wrong")}function unSelectInput(e,t,n){t.hasChanged?(t.classList.contains("correct")?e.textContent="date"===n?dateTransform(t.value):t.value:(t.classList.contains("wrong")||t.classList.add("wrong"),e.textContent="time"===n?"Please select a valid Time":"Please select a valid Date"),t.classList.add("chosen")):e.textContent="time"===n?"Time":"Date",t.classList.remove("selected")}document.addEventListener("DOMContentLoaded",()=>{startApp()});
//# sourceMappingURL=bundle.js.map
